<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8"/>
    <meta http-equiv="X-UA-Compatible" content="IE=edge"/>
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/>
    <meta name="description" content="{{ _("COVID-19 Italy outbreak data visualization") }}">
    <meta name="author" content="Fabrizio Miano"/>
    <meta property="og:title" content="{{ _("COVID-19 Italy Monitor") }}"/>
    <meta property="og:url" content="https://covidashit.herokuapp.com/"/>
    <meta property="og:description" content="{{ _("COVID-19 Italy outbreak data visualization") }}">
    <meta property="og:image" content="https://covidashit.herokuapp.com/static/coronasketch.png"/>
    <meta property="og:image:type" content="image/png"/>
    <meta property="og:image:width" content="1200"/>
    <meta property="og:image:height" content="630"/>
    <meta property="og:type" content="website"/>
    <meta property="og:locale" content="en_US"/>
    <meta property="og:locale:alternate" content="it_IT"/>
    <title>{{ _(pagetitle) }}</title>
    <link rel="apple-touch-icon" href="../static/virussketch.png" sizes="180x180">
    <link rel="icon" href="../static/virussketch.png" sizes="32x32" type="image/png">
    <link rel="icon" href="../static/virussketch.png" sizes="16x16" type="image/png">
    <link rel="mask-icon" href="../static/virussketch.png" color="#563d7c">
    <link rel="icon" href="../static/virussketch.png">
    <link href="../static/css/styles.css" rel="stylesheet"/>
</head>

<body class="sb-nav-fixed">

<!-- Modal -->
<div class="modal fade" id="welcomeModal" tabindex="-1" role="dialog" aria-labelledby="welcomeModalLabel"
     aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered modal-dialog-scrollable" role="document">
        <div class="modal-content bg-light">
            <div class="modal-header">
                <h5 class="modal-title" id="exampleModalLabel">{{ _('HOW TO USE') }}</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body">
                <ul class="list-group">
                    <li class="list-group-item">
                        {{ _('Use the name of the series at the bottom of the chart to Toggle them on/off') }}
                    </li>
                    <li class="list-group-item">
                        {{ _('Hover or tap') }} <i class="fas fa-info-circle text-black-50"></i>
                        {{ _('next to the card title to read the description of the data') }}
                    </li>
                </ul>

                <hr>
                <div class="container">
                    <div class="text-center text-uppercase text-danger">
                        <b>Keep calm and stay at home </b>
                    </div>
                </div>
                <div class="container">
                    <div class="text-center text-uppercase font-weight-bold text-info">
                        {{ _('Days since lockdown:') }} {{ _(lockdown_days) }}
                    </div>
                </div>
            </div>

            <div class="modal-footer">
                <button class="btn btn-info" onclick=" window.open('https://fabriziomiano.github.io','_blank')">
                    <i class="fas fa-user-circle mr-2"></i>{{ _('Who made this?') }}
                </button>
                <button type="button" class="btn btn-success" data-dismiss="modal">
                    <i class="far fa-thumbs-up mr-2"></i>{{ _("Got it!") }}
                </button>
                <div class="small"><b>{{ _("NOTE:") }}</b> {{ _('Only "Total cases" is provided for the provinces.') }}</div>
            </div>
        </div>
    </div>
</div>


<!-- Navbar -->
<nav class="sb-topnav navbar navbar-expand navbar-dark bg-dark">
    <img class="ml-2" src="../static/virussketch.png" alt="" width="32" height="32">
    <a class="navbar-brand" href="/">
        {% if territory %}
            {{ territory }}
        {% else %}
            {{ _(pagetitle) }}
        {% endif %}
    </a>
    <button class="btn btn-link btn-sm order-first" id="sidebarToggle"><i class="fas fa-bars"></i></button>
</nav>

<!-- Main layout -->
<div id="layoutSidenav">

    <!-- Sidebar nav -->
    <div id="layoutSidenav_nav">
        <nav class="sb-sidenav accordion sb-sidenav-dark" id="sidenavAccordion">
            <div class="sb-sidenav-menu">
                <div class="nav">
                    <div class="sb-sidenav-menu-heading">{{ _("Usage and credits") }}</div>
                    <div class="container-fluid">
                        <button type="button" class="btn btn-sm btn-outline-info" data-toggle="modal"
                                data-target="#welcomeModal">
                            <i class="fas fa-info-circle"></i> {{ _("How to") }}
                        </button>
                    </div>

                    <div class="sb-sidenav-menu-heading">{{ _('Navigate') }}</div>
                    <a class="nav-link" href="/">
                        <div class="sb-nav-link-icon"><i class="fas fa-tachometer-alt"></i></div>
                        {{ _('National Trend') }}
                    </a>

                    <a class="nav-link collapsed" href="#" data-toggle="collapse" data-target="#collapseRegionLayouts"
                       aria-expanded="false" aria-controls="collapseRegionLayouts">
                        <div class="sb-nav-link-icon"><i class="fas fa-chart-line"></i></div>
                        {{ _('Regions') }}
                        <div class="sb-sidenav-collapse-arrow"><i class="fas fa-angle-down"></i></div>
                    </a>
                    <div class="collapse" id="collapseRegionLayouts" aria-labelledby="headingOne"
                         data-parent="#sidenavAccordion">
                        <nav class="sb-sidenav-menu-nested nav small">
                            {% for region in regions %}
                                <a class="nav-link" href="/regions/{{ region }}">{{ region }}</a>
                            {% endfor %}
                        </nav>
                    </div>

                    <a class="nav-link collapsed" href="#" data-toggle="collapse" data-target="#collapseProvinceLayouts"
                       aria-expanded="false" aria-controls="collapseProvinceLayouts">
                        <div class="sb-nav-link-icon"><i class="fas fa-chart-line"></i></div>
                        {{ _('Provinces') }}
                        <div class="sb-sidenav-collapse-arrow"><i class="fas fa-angle-down"></i></div>
                    </a>
                    <div class="collapse" id="collapseProvinceLayouts" aria-labelledby="headingOne"
                         data-parent="#sidenavAccordion">
                        <nav class="sb-sidenav-menu-nested small nav">
                            {% for province in provinces %}
                                <a class="nav-link" href="/provinces/{{ province }}">{{ province }}</a>
                            {% endfor %}
                        </nav>
                    </div>

                    <div class="sb-sidenav-menu-heading">Extra</div>
                    <a class="nav-link"
                       href="http://www.protezionecivile.gov.it/"
                       target="_blank">
                        <div class="sb-nav-link-icon"><i class="far fa-newspaper"></i></div>
                        {{ _('CP News') }}</a>
                    <a class="nav-link" href="https://github.com/pcm-dpc/COVID-19" target="_blank">
                        <div class="sb-nav-link-icon"><i class="fab fa-github"></i></div>
                        {{ _('CP Repo') }}</a>
                </div>
            </div>

            <!-- footer sidebar-->
            <div class="sb-sidenav-footer">
                <div class="small">{{ _('Days since lockdown') }}: {{ lockdown_days }}
                    <a href="https://twitter.com/hashtag/italiachiusa"
                       target="_blank"> {{ _("#italiachiusa on Twitter") }}</a>
                </div>
            </div>
        </nav>
    </div>

    <!-- page content -->
    <div id="layoutSidenav_content">
        <main>
            <div class="container-fluid">

                <!-- Breadcrumb -->
                <ol class="breadcrumb mt-3">
                    <li class="breadcrumb-item text-capitalize active">
                        <i class="fas fa-bullhorn mr-2"></i>{{ _("Latest Update:") }} {{ latest_update }}
                    </li>
                </ol>

                <!-- Cards -->
                <div class="row">
                    {% for t in trend %}
                        <div class="col-xl-4 mb-3">
                            <div class="card border-left-primary shadow h-100 ">
                                <div class="card-header font-weight-bold text-primary text-uppercase mb-1">
                                    {{ _(t.title) }}
                                    <i class="fas fa-info-circle text-black-50" data-toggle="tooltip"
                                       data-placement="auto"
                                       data-original-title="{{ _(t.longdesc) }}">
                                    </i>
                                </div>
                                <div class="card-body">
                                    <div class="row no-gutters align-items-center">
                                        <div class="col auto">
                                            <div class="h1 mb-0 font-weight-bold text-gray-800">{{ t.count }}</div>
                                        </div>
                                        <div class="col-auto">
                                            {% if t.status== "happy" %}
                                                <strong class="text-success">
                                                    <i class="fas fa-long-arrow-alt-down fa-5x" data-toggle="tooltip" data-placement="auto"
                                                       data-original-title="{{ _('Decreased with respect to yesterday') }}">
                                                    </i>
                                                </strong>
                                            {% elif t.status == "neutral" %}
                                                <strong>
                                                    <i class="fas fa-minus fa-5x" data-toggle="tooltip" data-placement="auto"
                                                       data-original-title="{{ _('Stable with respect to yesterday') }}">
                                                    </i>
                                                </strong>
                                            {% else %}
                                                <strong class="text-danger">
                                                    <i class="fas fa-long-arrow-alt-up fa-5x" data-toggle="tooltip" data-placement="auto"
                                                       data-original-title="{{ _('Increased with respect to yesterday') }}">
                                                    </i>
                                                </strong>
                                            {% endif %}
                                        </div>
                                    </div>
                                </div>
                                <div class="card-footer">
                                    <span class="small text-info text-capitalize">{{ _(t.desc) }}</span>
                                </div>
                            </div>
                        </div>
                    {% endfor %}
                </div>

                <!-- Chart -->
                <div class="row">
                    <div class="col-xl-6">
                        <div class="card border-left-primary shadow mb-3" id="chartCard">
                            <div class="card-header"><i class="fas fa-chart-line mr-2"></i>{{ _("Trend") }} |
                                {% if territory %}
                                    {{ territory }}
                                {% else %} {{ _("National") }}
                                {% endif %}
                            </div>
                            <div id="chart-trend" class="container-fluid" style="border: none; width:100%; margin: 0 auto"></div>
                            <script>
                                let series = {{ series|safe }};
                                let title = {{ chart_title|safe }};
                                let xAxis = {{ xAxis|safe }};
                                let yAxis = {{ yAxis|safe }};
                                let credits = {{ credits_data|safe }};
                                let subtitle = {{ source_subtitle|safe }};
                            </script>
                        </div>
                    </div>

                    {% if territory not in provinces %}
                        <div class="col-xl-6">
                            <div class="card border-left-primary shadow mb-3" id="chartCard">
                                <div class="card-header"><i class="fas fa-chart-line mr-2"></i>{{ _("Still on the exponential?") }} |
                                    {% if territory %}
                                        {{ territory }}
                                    {% else %} {{ _("National") }}
                                    {% endif %}
                                </div>
                                <div id="chart-iacopo" class="container-fluid" style="border: none; width:100%; margin: 0 auto"></div>
                                <script>
                                    let scatterData = {{ scatterplot_series|safe }};
                                    let scatterTitle = {{ scatter_title|safe }};
                                    let scatterXAxis = {{ scatter_xaxis|safe }};
                                    let scatterYAxis = {{ scatter_yaxis|safe }};
                                    credits = {{ credits_data|safe }};
                                    subtitle = {{ source_subtitle|safe }};
                                </script>
                            </div>
                        </div>
                    {% endif %}
                </div>

            </div>
        </main>
    </div>
</div>

<script src="https://code.jquery.com/jquery-3.4.1.min.js" crossorigin="anonymous"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.bundle.min.js" crossorigin="anonymous"></script>
<script src="https://code.highcharts.com/highcharts.js"></script>
<script src="https://code.highcharts.com/highcharts-more.js"></script>
<script src="https://code.highcharts.com/modules/series-label.js"></script>
<script src="https://code.highcharts.com/modules/exporting.js"></script>
<script src="../static/js/scripts.js?ts={{ ts }}"></script>
<script src="../static/js/makeChart.js?ts={{ ts }}"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.11.2/js/all.min.js" crossorigin="anonymous"></script>

</body>
</html>
